(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-543aaec2","chunk-643d3d07"],{"068f":function(t,e,i){"use strict";i("0c4f")},"0c4f":function(t,e,i){},"3b27":function(t,e,i){"use strict";i("e1e5")},"4ee1":function(t,e,i){var n={"./theme1/file/dir.png":"8016"};function a(t){var e=s(t);return i(e)}function s(t){if(!i.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}a.keys=function(){return Object.keys(n)},a.resolve=s,t.exports=a,a.id="4ee1"},"59d1":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"export_log_wrap"},[i("FileMode",{attrs:{fromType:"videoExport"},on:{fnConfirm:t.fnConfirm,handleOpenLoading:t.handleOpenLoading}}),i("cx-loading",{attrs:{visible:t.isLoading},on:{"update:visible":function(e){t.isLoading=e}}},[t._v(t._s(t.$t("Common.loading")))])],1)},a=[],s=i("1da1"),r=i("d4ec"),o=i("bee2"),c=i("262e"),l=i("2caf"),u=(i("96cf"),i("9ab4")),h=i("1b40"),d=i("907a"),f=function(t){Object(c["a"])(i,t);var e=Object(l["a"])(i);function i(){var t;return Object(r["a"])(this,i),t=e.apply(this,arguments),t.videoPath="",t.isLoading=!1,t}return Object(o["a"])(i,[{key:"created",value:function(){this.videoPath=this.$route.query["origin"]}},{key:"handleOpenLoading",value:function(t){this.isLoading=t}},{key:"fnConfirm",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var i,n,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={method:"download_video",params:{video_path_list:this.videoPath,out_put_path:e}},t.next=3,this.$httpClient({method:"post",url:"".concat(this.$backBaseUrl,"/time_lapse/time_lapse/"),data:i});case 3:n=t.sent,a=(null===n||void 0===n?void 0:n.data)||{},s=a.code,"0000"===s?this.$toast.success(this.$t("Common.success")):this.$toast.fail(this.$t("Common.failure")),this.isLoading=!1,this.$router.go(-1);case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),i}(Object(h["c"])(h["g"]));f=Object(u["a"])([Object(h["a"])({components:{FileMode:d["default"]}})],f);var p=f,g=p,m=(i("3b27"),i("2877")),v=Object(m["a"])(g,n,a,!1,null,"10fa1f8a",null);e["default"]=v.exports},8016:function(t,e,i){t.exports=i.p+"img/dir.3f66849e.png"},"907a":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"file-model-page"},[n("div",{staticClass:"title-wrap"},[n("div",{staticClass:"page-title"},[t._v(t._s(t.$t(t.currentTitle)))]),n("div",{staticClass:"dir-back"},t._l(t.pathList,(function(e,i){return n("span",{key:i,staticClass:"dir-back-item",on:{click:function(n){return t.goBackDir(e,i)}}},[n("span",{staticClass:"dir-text"},[t._v(t._s(e.name))]),n("span",{staticClass:"split-line"},[t._v("/")])])})),0)]),n("div",{staticClass:"operate-wrap",attrs:{id:"operate-wrap"}},[n("van-pull-refresh",{style:{height:"100%",overflow:"auto"},attrs:{id:"ListRolling",disabled:t.eleScrollTop>=10,"loosing-text":t.$t("File.pullRefresh"),"loading-text":t.$t("File.loading"),"pulling-text":t.$t("File.releaseRefresh")},on:{refresh:t.onRefresh},model:{value:t.refresh,callback:function(e){t.refresh=e},expression:"refresh"}},[n("van-list",{staticClass:"dir-scroll-list",attrs:{finished:t.finished,"immediate-check":!1,"finished-text":t.$t("File.noMore"),"loading-text":t.$t("File.loading")},on:{load:t.getDirList},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.dirList,(function(e,a){return n("div",{key:a,staticClass:"dir-item",on:{click:function(i){return t.handleClickDir(e)}}},[n("div",{staticClass:"dir-img"},[n("img",{attrs:{src:i("4ee1")("./"+t.config.uiSettings.theme.theme+"/file/dir.png"),alt:""}})]),n("div",{staticClass:"dir-name"},[t._v(t._s(e.dir_name))])])})),0)],1)],1),n("div",{staticClass:"file-content-mode"},[n("div",{staticClass:"btn",on:{click:t.toConfirm}},[t._v(t._s("logExport"===t.fromType?t.$t("File.export"):t.$t("Common.confirm")))])]),t.isLoadingShow?n("cx-loading",{attrs:{visible:t.isLoadingShow},on:{"update:visible":function(e){t.isLoadingShow=e}}},[t._v(" "+t._s(t.$t(t.currentLoadingTip))+" ")]):t._e(),n("van-dialog",{staticClass:"export-progress only-confirm",attrs:{"confirm-button-text":t.$t("Common.cancel"),"before-close":t.cancelExport},model:{value:t.showExportProgerss,callback:function(e){t.showExportProgerss=e},expression:"showExportProgerss"}},[n("div",{staticClass:"export-tip"},[n("van-loading",{attrs:{size:"4rem"}}),n("div",{staticClass:"export-text"},[t._v(t._s(t.$t("File.exporting"))+"...")])],1)])],1)},a=[],s=i("5530"),r=i("2909"),o=i("1da1"),c=i("d4ec"),l=i("bee2"),u=i("262e"),h=i("2caf"),d=(i("fb6a"),i("96cf"),i("9ab4")),f=i("1b40"),p=i("2f62"),g="/mnt/exUDISK",m=function(t){Object(u["a"])(i,t);var e=Object(h["a"])(i);function i(){var t;return Object(c["a"])(this,i),t=e.apply(this,arguments),t.loading=!1,t.finished=!1,t.cancelTokenFn=null,t.currentLoadingTip="",t.isLoadingShow=!1,t.currentPage=0,t.pageSize=10,t.refresh=!1,t.eleScrollTop=0,t.dirList=[],t.pathList=[{name:t.$t("File.upFile"),path:g}],t.currentPath=g,t.fromUrl="",t.altitude=0,t.showExportProgerss=!1,t.logDownTimer=null,t}return Object(l["a"])(i,[{key:"queryData",get:function(){var t;return null===(t=this.$route.params)||void 0===t?void 0:t.queryData}},{key:"udiskStatus",get:function(){return this.$store.state.common.udiskStatus}},{key:"currentTitle",get:function(){return this.fromUrl&&"/File"===this.fromUrl?"File.selectPos":"logExport"===this.fromType||"videoExport"===this.fromType?"File.selectExportPos":void 0}},{key:"onUdiskStatus",value:function(t){t||(this.$toast.fail(this.$t("File.terminate")),this.$router.go(-1))}},{key:"mounted",value:function(){this.getDirList(),this.addScrollListener()}},{key:"beforeDestroy",value:function(){clearInterval(this.logDownTimer)}},{key:"onRefresh",value:function(){var t=this;this.cancelTokenFn&&this.cancelTokenFn(),this.cancelTokenFn=null,this.fnDataInit(),this.$nextTick((function(){t.getDirList()}))}},{key:"getDirList",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.cancelTokenFn&&this.cancelTokenFn(),this.cancelTokenFn=null,this.currentPage+=1,this.loading=!0,e={method:"get_sdcard_dir_list",page:this.currentPage,page_size:this.pageSize,sd_path:this.currentPath},this.$httpClient({method:"get",url:"".concat(this.$backBaseUrl,"/files/"),params:e,cancelToken:new this.$httpClient.prototype.CancelToken((function(t){i.cancelTokenFn=t}))}).then((function(t){var e=(null===t||void 0===t?void 0:t.data)||{};if("0000"===e.code){var n,a;if(1===e.data.currentPage)i.dirList=e.data.data;else(a=i.dirList).push.apply(a,Object(r["a"])(e.data.data));i.currentPage=e.data.current_page,i.loading=!1,(e.data.current_page>=e.data.page_count||0===(null===(n=e.data)||void 0===n?void 0:n.data.length))&&(i.finished=!0)}else i.loading=!1})).catch((function(t){i.loading=!1}));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"handleClickDir",value:function(t){var e=this;this.$audioPlay(),this.fnDataInit(),this.currentPath=this.currentPath+"/"+t.dir_name,this.pathList.push({name:t.dir_name,path:t.origin.substr(2)}),this.$nextTick((function(){e.getDirList()}))}},{key:"goBackDir",value:function(t,e){var i=this;this.$audioPlay(),e>=1?(this.pathList=this.pathList.slice(0,e),this.currentPath=this.pathList[e-1].path,this.fnDataInit(),this.$nextTick((function(){i.getDirList()}))):(this.currentPath=g,this.pathList=[{name:this.$t("File.upFile"),path:g}],this.$router.go(-1))}},{key:"fnDataInit",value:function(){this.dirList=[],this.loading=!0,this.finished=!1,this.refresh=!1,this.eleScrollTop=0,this.currentPage=0}},{key:"addScrollListener",value:function(){var t=document.getElementById("operate-wrap");t&&t.addEventListener("scroll",this.handlerScroll,!0)}},{key:"handlerScroll",value:function(t){t&&(this.eleScrollTop=t.target["scrollTop"])}},{key:"handleCopyFile",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={method:"cp_sd_card_2_driver",params:{files_list:this.queryData["data"],move_target:"paid_2_sd_card",target_dir:this.currentPath,action:"copy"}},this.currentLoadingTip="File.copying",this.isLoadingShow=!0,t.next=5,this.$httpClient({method:"post",url:"".concat(this.$backBaseUrl,"/files/"),data:e});case 5:i=t.sent,n=(null===i||void 0===i?void 0:i.data)||{},"0000"===n.code?(this.$toast.success(this.$t("File.successCopy")),this.$router.go(-1)):"1013"===n.code?this.$toast.fail(this.$t("File.same")):"1114"===n.code?this.$toast.fail(this.$t("File.insufficient")):"1115"===n.code?this.$toast.fail(this.$t("File.insufficientU")):this.$toast.fail(this.$t("File.failureCopy")),this.isLoadingShow=!1;case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"cancelExport",value:function(t,e){this.$audioPlay(),e(!1);var i=this,n={title:this.$t("File.sureToCancel"),message:this.$t("File.cancelLog"),confirmButtonText:this.$t("Common.confirm"),cancelButtonText:this.$t("Common.cancel"),className:"dialog-cancel-update",id:100,_onConfirm:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i.$audioPlay(),i.currentLoadingTip="File.cancelingLog",i.showExportProgerss=!1,i.confirmCancelExport();case 4:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),_onCancel:function(){i.$audioPlay()}};this._dialog.addDialogMsg(n),this._dialog.showDialog()}},{key:"confirmCancelExport",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$audioPlay(),e={method:"cancel_export_log",params:{}},this.isLoadingShow=!0,t.next=5,this.$httpClient({method:"post",url:"".concat(this.$backBaseUrl,"/settings/machine_info/"),data:e});case 5:i=t.sent,n=(null===i||void 0===i?void 0:i.data)||{},"4313"===n.code?this.$toast.fail(this.$t("File.failedTo")):"0000"===n.code&&(this.$toast.success(this.$t("Common.cancelSuccess")),this.altitude=0,clearInterval(this.logDownTimer)),this.isLoadingShow=!1;case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"exportLog",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.showExportProgerss=!0,this.fnSetTime(),e={method:"export_log",path:this.currentPath},t.next=5,this.$httpClient({method:"get",url:"".concat(this.$backBaseUrl,"/settings/machine_info/"),params:e});case 5:i=t.sent,n=(null===i||void 0===i?void 0:i.data)||{},"1115"===n.code?this.$toast.fail(this.$t("File.insufficientU")):"0000"===n.code?(this.altitude=100,this.$router.go(-1),this.$toast.success(this.$t("File.succeeded"))):"4319"===n.code?this.$toast.fail(this.$t("File.deskflash")):"4311"===n.code||this.$toast.fail(this.$t("Common.failure")),this.altitude=0,this.showExportProgerss=!1,clearInterval(this.logDownTimer);case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"fnSetTime",value:function(){var t=this;this.logDownTimer=setInterval((function(){t.altitude<99?t.altitude+=1:clearInterval(t.logDownTimer)}),500)}},{key:"toConfirm",value:function(){this.$audioPlay(),this.fromUrl&&"/File"===this.fromUrl?this.handleCopyFile():"logExport"===this.fromType?this.exportLog():"videoExport"===this.fromType&&(this.$emit("handleOpenLoading",!0),this.$emit("fnConfirm",this.currentPath))}}]),i}(Object(f["c"])(f["g"]));Object(d["a"])([Object(f["d"])({type:String,default:""})],m.prototype,"fromType",void 0),Object(d["a"])([Object(f["h"])("udiskStatus")],m.prototype,"onUdiskStatus",null),m=Object(d["a"])([Object(f["a"])({computed:Object(s["a"])({},Object(p["b"])(["config"])),beforeRouteEnter:function(t,e,i){i((function(t){t.fromUrl=e.path}))}})],m);var v=m,$=v,k=(i("068f"),i("2877")),y=Object(k["a"])($,n,a,!1,null,"032797c6",null);e["default"]=y.exports},e1e5:function(t,e,i){}}]);