(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54bc56b4"],{"0b6b":function(t,e,r){var i={"./theme1/home/disSetting.png":"b650d"};function n(t){var e=a(t);return r(e)}function a(t){if(!r.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}n.keys=function(){return Object.keys(i)},n.resolve=a,t.exports=n,n.id="0b6b"},2338:function(t,e,r){t.exports=r.p+"img/restart.935b5732.png"},"4a5b":function(t,e,r){"use strict";r("a649")},9343:function(t,e,r){var i={"./theme1/home/restart.png":"2338"};function n(t){var e=a(t);return r(e)}function a(t){if(!r.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}n.keys=function(){return Object.keys(i)},n.resolve=a,t.exports=n,n.id="9343"},a649:function(t,e,r){},af22:function(t,e,r){"use strict";var i=r("1da1"),n=r("d4ec"),a=r("bee2"),s=r("262e"),o=r("2caf"),c=(r("96cf"),r("9ab4")),u=r("2b0e"),l=r("c56f"),p=r("1b40"),h=function(t){Object(s["a"])(r,t);var e=Object(o["a"])(r);function r(){return Object(n["a"])(this,r),e.apply(this,arguments)}return Object(a["a"])(r,[{key:"hostReboot",value:function(){l["a"].machineReboot()}},{key:"hostShutdown",value:function(){l["a"].machineShutdown()}},{key:"serviceRestartKlipper",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$store.commit("socket/setAcceptNotifications",!1),t.next=3,this.$store.dispatch("reset",["server","printer","charts","wait"],{root:!0});case 3:l["a"].machineServicesRestart("klipper");case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"serviceRestartMoonraker",value:function(){l["a"].serverRestart(),this.$store.commit("socket/setSocketDisconnecting",!0)}},{key:"serviceRestartByName",value:function(t){l["a"].machineServicesRestart(t)}},{key:"restartKlippy",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$audioPlay(),this.$store.commit("socket/setAcceptNotifications",!1),t.next=4,this.$store.dispatch("reset",["server","printer","charts","wait"],{root:!0});case 4:l["a"].printerRestart();case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"firmwareRestartKlippy",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$audioPlay(),this.$store.commit("socket/setAcceptNotifications",!1),t.next=4,this.$store.dispatch("reset",["server","printer","charts","wait"],{root:!0});case 4:l["a"].printerFirmwareRestart();case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),r}(u["a"]);h=Object(c["a"])([p["a"]],h),e["a"]=h},b158:function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"disconnect-box"},[i("NavTop",{attrs:{fromPage:"disconnect"}}),i("div",{staticClass:"disconnect-content"},[i("div",{staticClass:"connect-tip",class:{hadFailMessage:t.klippyStateMessage&&"Printer is ready"!==t.klippyStateMessage}},[i("img",{staticClass:"logo",attrs:{src:r("c8a0"),alt:""}}),i("div",{staticClass:"tip-text"},[t._v(t._s(t.$t("Disconnect.connectPrint")))]),"Printer is ready"!==t.klippyStateMessage?i("div",{staticClass:"error-tip",domProps:{innerHTML:t._s(t.handleConnectError(t.klippyStateMessage))}}):t._e()]),i("div",{staticClass:"btn-wrap"},[i("div",{staticClass:"control-item",on:{touchend:function(e){return e.preventDefault(),t.handleKlipperRestart.apply(null,arguments)}}},[i("img",{staticClass:"control-icon",attrs:{src:r("9343")("./"+t.config.uiSettings.theme.theme+"/home/restart.png"),alt:""}}),i("div",{staticClass:"control-text"},[t._v(t._s(t.$t("Disconnect.restart")))])]),i("div",{staticClass:"control-item",on:{touchend:function(e){return e.preventDefault(),t.goSetting.apply(null,arguments)}}},[i("img",{staticClass:"control-icon",attrs:{src:r("0b6b")("./"+t.config.uiSettings.theme.theme+"/home/disSetting.png"),alt:""}}),i("div",{staticClass:"control-text"},[t._v(t._s(t.$t("Disconnect.setting")))])])])])],1)},n=[],a=r("5530"),s=r("1da1"),o=r("d4ec"),c=r("bee2"),u=r("262e"),l=r("2caf"),p=(r("96cf"),r("ac1f"),r("5319"),r("caad"),r("2532"),r("d3b7"),r("ddb0"),r("9ab4")),h=r("1b40"),m=r("aeb7"),f=r("9265"),d=r("af22"),g=r("2f62"),v=r("0613"),b=r("2da6"),y=function(t){Object(u["a"])(r,t);var e=Object(l["a"])(r);function r(){var t;return Object(o["a"])(this,r),t=e.apply(this,arguments),t.fromUrl="",t.firmwareRestarting=!1,t.klipperRestarting=!1,t.loadingTimer=null,t.isRestarting=!1,t}return Object(c["a"])(r,[{key:"goSetting",value:function(){this.$audioPlay(),this.$router.push("/ohterSetting")}},{key:"isFirstBoot",get:function(){return v["a"].getters["common/getIsFirstBoot"]}},{key:"isShowSettingBtn",get:function(){var t;return!this.isFirstBoot&&(null===(t=v["a"].state.common)||void 0===t||!t.isReplacement)}},{key:"onKlippyReadyChange",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e){t.next=13;break}if(v["a"].commit("common/setZoffsetOverLimitFirst",!0),!this.isFirstBoot){t.next=6;break}this.$router.go(-1),t.next=13;break;case 6:if(null===(r=v["a"].state.common)||void 0===r||!r.isReplacement){t.next=10;break}this.$router.go(-1),t.next=13;break;case 10:return t.next=12,this.getPrinterConfigSet();case 12:this.$router.replace("/Home");case 13:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"onKlippyStateMessageChange",value:function(t){var e,r=this;if(t.includes("Option 'z_offset' in section 'bltouch' must have minimum of 0.0")&&null!==(e=v["a"].state.common)&&void 0!==e&&e.zOffsetOverLimitFirst){v["a"].commit("common/setZoffsetOverLimitFirst",!1);var i=setTimeout((function(){r.showZoffsetTip(),clearTimeout(i)}),10)}}},{key:"firmwareRestartResult",get:function(){return this.$store.getters["common/getFirmwareRestartResult"]}},{key:"onFirmwareRestartResultChange",value:function(t){"ok"===(null===t||void 0===t?void 0:t.result)||this.$toast.fail(this.$t("Common.failure")),this.firmwareRestarting=!1}},{key:"klipperRestartResult",get:function(){return this.$store.getters["common/getKlipperRestartResult"]}},{key:"onKlipperRestartResultChange",value:function(t){"ok"===(null===t||void 0===t?void 0:t.result)||this.$toast.fail(this.$t("Common.failure")),this.klipperRestarting=!1}},{key:"showZoffsetTip",value:function(){var t=this,e={title:this.$t("Disconnect.errorTip"),message:this.$t("Disconnect.probeError"),confirmButtonText:this.$t("Common.confirm"),className:"only-confirm",onlyConfirm:!0,id:107,_onConfirm:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$audioPlay();case 1:case"end":return e.stop()}}),e)})));function r(){return e.apply(this,arguments)}return r}()};this._dialog.addDialogMsg(e),this._dialog.showDialog()}},{key:"handleConnectError",value:function(t){try{var e=JSON.parse(t),r=e.code,i=e.values,n=void 0===i?[]:i;return r&&this.$t("crealityError.".concat(r))?0!==n.length?this.$t("crealityError.".concat(r),n):this.$t("crealityError.".concat(r)):e.msg}catch(a){return t}}},{key:"handleFirmwareRestart",value:function(){this.isRestarting?this.$toast.fail(this.$t("newAdd.restarting")):(this.startTimer(),this.firmwareRestartKlippy())}},{key:"handleKlipperRestart",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.$audioPlay(),!this.isRestarting){t.next=4;break}return this.$toast.fail(this.$t("newAdd.restarting")),t.abrupt("return");case 4:return this.startTimer(),t.next=7,this.$httpClient({method:"get",url:"".concat(this.$backBaseUrl,"/settings/machine_info/?method=restart_klipper_and_mcu")});case 7:e=t.sent,this.klipperRestarting=!1,r=(null===e||void 0===e?void 0:e.data)||{},i=r.code,"0000"===i?(this.$store.commit("socket/setAcceptNotifications",!1),this.$store.dispatch("reset",["server","printer","charts","wait"],{root:!0})):this.$toast.fail(this.$t("Common.failure"));case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"startTimer",value:function(){var t=this;clearTimeout(this.loadingTimer),this.isRestarting=!0,this.loadingTimer=setTimeout((function(){clearTimeout(t.loadingTimer),t.isRestarting=!1}),1e4)}},{key:"beforeDestroy",value:function(){v["a"].commit("common/setIsBootGuide",!1),clearTimeout(this.loadingTimer),this.isRestarting=!1}}]),r}(Object(h["c"])(b["a"],f["a"],d["a"]));Object(p["a"])([Object(h["h"])("klippyReady",{immediate:!0})],y.prototype,"onKlippyReadyChange",null),Object(p["a"])([Object(h["h"])("klippyStateMessage",{immediate:!0})],y.prototype,"onKlippyStateMessageChange",null),Object(p["a"])([Object(h["h"])("firmwareRestartResult")],y.prototype,"onFirmwareRestartResultChange",null),y=Object(p["a"])([Object(h["a"])({components:{NavTop:m["a"]},computed:Object(a["a"])({},Object(g["b"])(["config"])),beforeRouteEnter:function(t,e,r){r((function(t){t.fromUrl=e.path}))}})],y);var k=y,R=k,w=(r("4a5b"),r("2877")),$=Object(w["a"])(R,i,n,!1,null,"174f95f8",null);e["default"]=$.exports},b650d:function(t,e,r){t.exports=r.p+"img/disSetting.5540bbcc.png"},c8a0:function(t,e,r){t.exports=r.p+"img/logo.c4acca01.png"}}]);