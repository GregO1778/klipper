(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a3a1b400"],{"486f":function(e,t,n){"use strict";n("f7ed")},5715:function(e,t,n){},"5b81":function(e,t,n){"use strict";var a=n("23e7"),i=n("da84"),s=n("c65b"),c=n("e330"),o=n("1d80"),r=n("1626"),l=n("44e7"),u=n("577e"),d=n("dc4a"),h=n("ad6d"),m=n("0cb2"),f=n("b622"),v=n("c430"),b=f("replace"),p=RegExp.prototype,y=i.TypeError,g=c(h),k=c("".indexOf),O=c("".replace),C=c("".slice),j=Math.max,w=function(e,t,n){return n>e.length?-1:""===t?n:k(e,t,n)};a({target:"String",proto:!0},{replaceAll:function(e,t){var n,a,i,c,h,f,x,L,S,$=o(this),_=0,H=0,A="";if(null!=e){if(n=l(e),n&&(a=u(o("flags"in p?e.flags:g(e))),!~k(a,"g")))throw y("`.replaceAll` does not allow non-global regexes");if(i=d(e,b),i)return s(i,e,$,t);if(v&&n)return O(u($),e,t)}c=u($),h=u(e),f=r(t),f||(t=u(t)),x=h.length,L=j(1,x),_=w(c,h,0);while(-1!==_)S=f?u(t(h,_,c)):m(h,c,_,[],void 0,t),A+=C(c,H,_)+S,H=_+x,_=w(c,h,_+L);return H<c.length&&(A+=C(c,H)),A}})},"8f1b":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"command-line",class:{isInputActive:e.isInputActive}},[n("div",{ref:"consoleList",staticClass:"command-wrap"},e._l(e.items,(function(t,a){return n("div",{key:a,staticClass:"con-item"},[n("ConsoleItem",{staticClass:"console-item",attrs:{value:t},on:{click:e.handleEntryClick}})],1)})),0),n("div",{staticClass:"check-scroll"},[n("van-checkbox",{attrs:{"label-disabled":!0,shape:"square"},on:{change:e.handleScrollChange},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v(e._s(e.$t("newAdd.autoScroll")))])],1),n("div",{staticClass:"send-wrap"},[n("van-field",{attrs:{placeholder:""},on:{focus:e.handleFocus,blur:e.handleBlur},model:{value:e.currentVal,callback:function(t){e.currentVal=t},expression:"currentVal"}}),n("div",{staticClass:"send-btn",on:{click:e.sendCommand}},[e._v(e._s(e.$t("Control.send")))])],1)])},i=[],s=n("5530"),c=n("1da1"),o=n("2909"),r=n("d4ec"),l=n("bee2"),u=n("262e"),d=n("2caf"),h=(n("96cf"),n("498a"),n("9ab4")),m=n("1b40"),f=n("2f62"),v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"console-item"},[e.value.time?n("span",{staticClass:"secondary--text mr-3 d-none d-sm-block"},[e._v(" "+e._s(e.itemTime)+"Â  ")]):e._e(),n("span",{class:e.itemClass,domProps:{innerHTML:e._s(e.itemMessage)},on:{"!click":function(t){return e.itemClick.apply(null,arguments)}}})])},b=[],p=(n("d3b7"),n("6062"),n("3ca3"),n("ddb0"),n("b64b"),n("ac1f"),n("5319"),n("99af"),n("2ca0"),n("5b81"),n("0c8b")),y=n("48b8"),g=function(e){Object(u["a"])(n,e);var t=Object(d["a"])(n);function n(){return Object(r["a"])(this,n),t.apply(this,arguments)}return Object(l["a"])(n,[{key:"knownCommands",get:function(){var e=this.$store.getters["console/getAllGcodeCommands"];return new Set(Object.keys(e))}},{key:"itemMessage",get:function(){var e=this,t=this.value.message;return"response"===this.value.type&&(t=this.value.message.replace(/([A-Z0-9_]{2,})/gm,(function(t,n){return e.knownCommands.has(n)?'<a class="primary--text text--lighten-1">'.concat(n.toUpperCase(),"</a>"):t}))),"command"===this.value.type?"".concat(p["a"].CONSOLE_SEND_PREFIX,'<a class="primary--text text--lighten-1">').concat(t,"</a>"):t}},{key:"itemTime",get:function(){if(this.value.time){var e=new Date(1e3*this.value.time);return e=Object(y["j"])(e),this.$dayjs(e).format("HH:mm:ss")}return""}},{key:"itemClass",get:function(){return this.value.message.startsWith("!!")?{"error--text":!0}:"command"===this.value.type?{"primary--text":!0}:{"secondary--text":!0}}},{key:"itemClick",value:function(e){this.$audioPlay();var t=e.target;if("a"===t.tagName.toLowerCase()){var n=t.innerHTML.replaceAll(/<br>/g,"\n").replace(/^\s+|\s+$/gm,"");this.$emit("click",n)}}}]),n}(m["g"]);Object(h["a"])([Object(m["d"])({type:Object,default:{}})],g.prototype,"value",void 0),g=Object(h["a"])([Object(m["a"])({})],g);var k=g,O=k,C=(n("486f"),n("2877")),j=Object(C["a"])(O,v,b,!1,null,"6ecb3ef2",null),w=j.exports,x=n("9265"),L=n("c56f"),S=n("b5ee"),$=n("d33b"),_=function(e){Object(u["a"])(n,e);var t=Object(d["a"])(n);function n(){var e;return Object(r["a"])(this,n),e=t.apply(this,arguments),e.currentVal="",e.commandList=[],e.commandHistoryCount=p["a"].CONSOLE_COMMAND_HISTORY,e.history=[],e.originalHistory=[],e.isInputActive=!1,e.checked=e.$store.state.common.isAutoScroll,e}return Object(l["a"])(n,[{key:"items",get:function(){return this.$store.getters["console/getConsoleEntries"]}},{key:"mounted",value:function(){var e=this.$store.state.console.commandHistory;this.history=Object(o["a"])(e),this.originalHistory=Object(o["a"])(e),this.checked&&this.handleScrollBottom()}},{key:"sendCommand",value:function(){this.$audioPlay(),this.checkPrinterStates()||this.currentVal&&this.currentVal.trim()&&(this.history.length>=this.commandHistoryCount&&this.originalHistory.pop(),this.originalHistory.unshift(this.currentVal),this.$store.dispatch("console/onUpdateCommandHistory",Object(o["a"])(this.originalHistory)),this.history=Object(o["a"])(this.originalHistory),this.$store.commit("console/setConsoleCommand",this.currentVal),this.currentVal&&"m112"===this.currentVal.trim().toLowerCase()&&L["a"].printerEmergencyStop(),this.sendGcode(this.currentVal),this.currentVal="",this.checked&&this.handleScrollBottom())}},{key:"handleEntryClick",value:function(e){this.currentVal=e}},{key:"handleFocus",value:function(){this.isInputActive=!0,this.$audioPlay()}},{key:"handleBlur",value:function(){this.isInputActive=!1}},{key:"handleScrollBottom",value:function(){var e=this,t=setTimeout((function(){if(e.consoleList&&e.items.length){var n=e.consoleList.scrollHeight,a=e.consoleList.offsetHeight;e.consoleList.scrollTo(0,n-a)}clearTimeout(t)}),200)}},{key:"handleScrollChange",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$audioPlay(),this.$store.commit("common/setIsAutoScroll",t),e.next=4,Object(S["a"])("write",{isAutoScrollLabel:{isAutoScroll:t}});case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(Object(m["c"])(x["a"],$["a"]));Object(h["a"])([Object(m["f"])()],_.prototype,"consoleList",void 0),_=Object(h["a"])([Object(m["a"])({components:{ConsoleItem:w},computed:Object(s["a"])({},Object(f["b"])(["config"]))})],_);var H=_,A=H,E=(n("a85e"),Object(C["a"])(A,a,i,!1,null,"dcad57ee",null));t["default"]=E.exports},a85e:function(e,t,n){"use strict";n("5715")},d33b:function(e,t,n){"use strict";var a=n("d4ec"),i=n("bee2"),s=n("262e"),c=n("2caf"),o=n("9ab4"),r=n("2b0e"),l=n("1b40"),u=function(e){Object(s["a"])(n,e);var t=Object(c["a"])(n);function n(){return Object(a["a"])(this,n),t.apply(this,arguments)}return Object(i["a"])(n,[{key:"mounted",value:function(){this.inputKeyup()}},{key:"inputKeyup",value:function(){var e=arguments;document.onkeydown=function(t){var n=t||window.event||e.callee.caller.arguments[0];if(n&&null!==n&&void 0!==n&&n.keyCode)switch(null===n||void 0===n?void 0:n.keyCode){case 27:var a=document.activeElement;"input"===(null===a||void 0===a?void 0:a.tagName.toLocaleLowerCase())&&a.blur();break;case 13:var i=document.activeElement;"input"===(null===i||void 0===i?void 0:i.tagName.toLocaleLowerCase())&&i.blur();break}}}}]),n}(r["a"]);u=Object(o["a"])([l["a"]],u),t["a"]=u},f7ed:function(e,t,n){}}]);