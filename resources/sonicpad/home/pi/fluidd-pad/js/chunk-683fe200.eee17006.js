(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-683fe200"],{1990:function(e,t,n){"use strict";n("aaa3")},"1aa0":function(e,t,n){var i={"./theme1/home/pengtou.png":"96ab"};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=a,e.exports=r,r.id="1aa0"},2297:function(e,t,n){var i={"./theme1/file/adjust.png":"1451"};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=a,e.exports=r,r.id="2297"},2452:function(e,t,n){var i={"./theme1/print/exture_speed.png":"516f"};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=a,e.exports=r,r.id="2452"},"2d8e":function(e,t,n){var i={"./theme1/print/print_speed.png":"4e9c"};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=a,e.exports=r,r.id="2d8e"},"3a41":function(e,t,n){},"497c":function(e,t,n){"use strict";n("3a41")},5212:function(e,t,n){},"611e":function(e,t,n){},"6c90":function(e,t,n){"use strict";var i=n("53ca"),r=n("b85c"),a=n("5530"),s=n("1da1"),o=n("d4ec"),c=n("bee2"),u=n("262e"),l=n("2caf"),d=(n("96cf"),n("99af"),n("b0c0"),n("2ca0"),n("d3b7"),n("3ca3"),n("ddb0"),n("7db0"),n("9ab4")),h=n("2b0e"),p=n("1237"),f=n("1b40"),g=n("d9fe"),m=n("bc3a"),v=n.n(m),b=n("6822"),y=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.cancelTokenSource=void 0,e}return Object(c["a"])(n,[{key:"apiUrl",get:function(){return this.$store.state.config.apiUrl}},{key:"getThumbUrl",value:function(e,t,n,i){if(e.length){i||(i=(new Date).getTime());var r=Object(g["a"])(e,t,n);if(r&&r.absolute_path)return"".concat(r.absolute_path,"?cachebust=").concat(i);if(r&&r.data)return r.data}return""}},{key:"getGcode",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.size/1024/1024,n=!0,!n){e.next=9;break}return this.cancelTokenSource=v.a.CancelToken.source(),i=t.path?"".concat(t.path,"/").concat(t.filename):t.filename,e.next=8,this.getFile(i,"gcodes",t.size,{responseType:"text",transformResponse:[function(e){return e}],cancelToken:this.cancelTokenSource.token});case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getFile",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,n){var i,r,s,o,c,u=this,l=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=l.length>2&&void 0!==l[2]?l[2]:0,r=l.length>3?l[3]:void 0,s=n?"".concat(n,"/").concat(t):"".concat(t),o=performance.now(),this.$store.dispatch("files/updateFileDownload",{filepath:s,size:i,loaded:0,percent:0,speed:0,unit:"kB"}),c=Object(a["a"])(Object(a["a"])({},r),{},{onDownloadProgress:function(e){var t=["kB","MB","GB"],n=0,r=0,a=performance.now()-o;if(a>0){n=e.loaded/a;while(n>1024)n/=1024,r=Math.min(2,r+1)}var c={filepath:s,loaded:e.loaded,percent:Math.round(e.loaded/i*100),speed:n,unit:t[r]};e.lengthComputable&&(i=c.size=e.total),u.$store.dispatch("files/updateFileDownload",c)}}),e.next=8,p["a"].get(encodeURI(this.apiUrl+"/server/files/"+s+"?date="+(new Date).getTime()),c);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"downloadFile",value:function(e,t){var n=this;b["a"].getOneShot().then((function(e){return e.data.result})).then((function(i){var r=t?"".concat(t,"/").concat(e):"".concat(e),a=encodeURI(n.apiUrl+"/server/files/"+r+"?token="+i+"&date="+(new Date).getTime()),s=document.createElement("a");s.href=a,s.setAttribute("download",e),s.setAttribute("target","_blank"),document.body.appendChild(s),s.click(),document.body.removeChild(s)})).catch((function(){}))}},{key:"uploadFile",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,n,i,r,s){var o,c,u,l=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=new FormData,c="".concat(n,"/").concat(t.name),c=c.startsWith("/")?c:"/"+c,o.append("file",t,c),o.append("root",i),r&&o.append("print","true"),u=performance.now(),this.$store.dispatch("files/updateFileUpload",{filepath:c,size:t.size,loaded:0,percent:0,speed:0,unit:"kB",cancelled:!1}),e.abrupt("return",p["a"].post(this.apiUrl+"/server/files/upload",o,Object(a["a"])(Object(a["a"])({},s),{},{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){var t=["kB","MB","GB"],n=0,i=0,r=performance.now()-u;if(r>0){n=e.loaded/r;while(n>1024)n/=1024,i=Math.min(2,i+1)}l.$store.dispatch("files/updateFileUpload",{filepath:c,loaded:e.loaded,percent:Math.round(e.loaded/e.total*100),speed:n,unit:t[i]})}})).then((function(e){return e})).catch((function(e){return e})).finally((function(){l.$store.dispatch("files/removeFileUpload",c)})));case 9:case"end":return e.stop()}}),e,this)})));function t(t,n,i,r,a){return e.apply(this,arguments)}return t}()},{key:"uploadFiles",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,n,a,s){var o,c,u,l,d,h,p,f,g=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:o=Object(r["a"])(t);try{for(o.s();!(c=o.n()).done;)u=c.value,l="".concat(n,"/").concat(u.name),l=l.startsWith("/")?l:"/"+l,this.$store.dispatch("files/updateFileUpload",{filepath:l,size:u.size,loaded:0,percent:0,speed:0,unit:"kB",cancelled:!1})}catch(m){o.e(m)}finally{o.f()}t.length>1&&(s=!1),d=Object(r["a"])(t),e.prev=4,p=regeneratorRuntime.mark((function e(){var t,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=h.value,i="".concat(n,"/").concat(t.name),i=i.startsWith("/")?i:"/"+i,r=g.$store.state.files.uploads.find((function(e){return e.filepath===i})),r.cancelled){e.next=16;break}return e.prev=5,g.cancelTokenSource=v.a.CancelToken.source(),e.next=9,g.uploadFile(t,n,a,s,{cancelToken:g.cancelTokenSource.token});case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e["catch"](5),e.abrupt("return",{v:e.t0});case 14:e.next=17;break;case 16:g.$store.dispatch("files/removeFileUpload",i);case 17:case"end":return e.stop()}}),e,null,[[5,11]])})),d.s();case 7:if((h=d.n()).done){e.next=14;break}return e.delegateYield(p(),"t0",9);case 9:if(f=e.t0,"object"!==Object(i["a"])(f)){e.next=12;break}return e.abrupt("return",f.v);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e["catch"](4),d.e(e.t1);case 19:return e.prev=19,d.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));function t(t,n,i,r){return e.apply(this,arguments)}return t}()}]),n}(h["a"]);y=Object(d["a"])([f["a"]],y),t["a"]=y},"6e0d":function(e,t,n){"use strict";var i=n("d4ec"),r=n("bee2"),a=n("262e"),s=n("2caf"),o=(n("d3b7"),n("159b"),n("b0c0"),n("b680"),n("a9e3"),n("9ab4")),c=n("0613"),u=n("2b0e"),l=n("1b40"),d=function(e){Object(a["a"])(n,e);var t=Object(s["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(r["a"])(n,[{key:"heaters",get:function(){return this.$store.getters["printer/getHeaters"]}},{key:"nozzalBedTemper",get:function(){var e={extruder:{temperature:0,target:0},heaterBed:{temperature:0,target:0}};return this.heaters.forEach((function(t){"extruder"===t.name?e.extruder={temperature:t.temperature.toFixed(0),target:t.target?t.target.toFixed(0):0}:"heater_bed"===t.name&&(e.heaterBed={temperature:t.temperature.toFixed(0),target:t.target?t.target.toFixed(0):0})})),e}},{key:"nozzalCurTem",get:function(){return this.nozzalBedTemper.extruder.temperature}},{key:"nozzalTagTem",get:function(){return this.nozzalBedTemper.extruder.target?this.nozzalBedTemper.extruder.target:this.nozzalBedTemper.extruder.temperature}},{key:"bedCurTem",get:function(){return this.nozzalBedTemper.heaterBed.temperature}},{key:"bedTagTem",get:function(){return this.nozzalBedTemper.heaterBed.target?this.nozzalBedTemper.heaterBed.target:this.nozzalBedTemper.heaterBed.temperature}},{key:"nozzalRealTagTem",get:function(){return Number(this.nozzalBedTemper.extruder.target)}},{key:"bedRealTagTem",get:function(){return Number(this.nozzalBedTemper.heaterBed.target)}},{key:"bedTempRange",get:function(){var e,t=null===(e=c["a"].state.common)||void 0===e?void 0:e.tempBedConfig,n=t.bedMinTemp,i=t.bedMaxTemp;return[n,i]}},{key:"nazzalTempRange",get:function(){var e,t=null===(e=c["a"].state.common)||void 0===e?void 0:e.tempBedConfig,n=t.nozzalMinTemp,i=t.nozzalMaxTemp;return[n,i]}}]),n}(u["a"]);d=Object(o["a"])([l["a"]],d),t["a"]=d},"6e6f":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"print-page"},[n("div",{staticClass:"print-details"},[n("div",{staticClass:"img-wrap"},[n("div",{staticClass:"img-content"},[e.filename&&!e.isRatesScreen?n("ImgWaterInject",{attrs:{imgUrl:e.filename}}):e._e()],1)]),n("div",{staticClass:"detail-content"},[n("PrintDes")],1)]),n("div",{staticClass:"print-control"},[n("PrintControl")],1)])},r=[],a=n("5530"),s=n("1da1"),o=n("d4ec"),c=n("bee2"),u=n("262e"),l=n("2caf"),d=(n("96cf"),n("ac1f"),n("5319"),n("d3b7"),n("3ca3"),n("ddb0"),n("9ab4")),h=n("1b40"),p=n("2f62"),f=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"print-des-page"},[i("div",{staticClass:"process"},[i("div",{staticClass:"circle-process"},[i("van-circle",{attrs:{clockwise:!1,rate:e.currentRate-3>=0?e.currentRate-3:0,size:"7.25rem",speed:100,"stroke-width":120,color:e.gradientColor,"stroke-linecap":"square"},model:{value:e.preRate,callback:function(t){e.preRate=t},expression:"preRate"}}),i("div",{staticClass:"process-text"},[i("div",{staticClass:"content-pro"},[e._v(" "+e._s(e.currentRate)+" "),i("span",[e._v("%")])])])],1),i("div",{staticClass:"current-parint"},[i("div",{staticClass:"file-name"},[e._v(e._s(e.fileNameShow))]),i("div",{staticClass:"print-state"},[e._v(e._s(e.currentStatusText))])])]),i("div",{staticClass:"print-des"},[i("div",{staticClass:"print-des-itme"},[i("div",{staticClass:"detail-item"},[i("img",{staticClass:"des-icon",attrs:{src:n("1aa0")("./"+e.config.uiSettings.theme.theme+"/home/pengtou.png"),alt:""}}),i("div",[e._v(e._s(e.nozzalBedTemper.extruder.temperature)+" / "+e._s(e.nozzalBedTemper.extruder.target)+" ℃")])]),i("div",{staticClass:"detail-item"},[i("img",{staticClass:"des-icon",attrs:{src:n("9544")("./"+e.config.uiSettings.theme.theme+"/home/heat_bed.png"),alt:""}}),i("div",[e._v(e._s(e.nozzalBedTemper.heaterBed.temperature)+" / "+e._s(e.nozzalBedTemper.heaterBed.target)+" ℃")])])]),i("div",{staticClass:"print-des-itme"},[i("div",{staticClass:"detail-item"},[i("img",{staticClass:"des-icon",attrs:{src:n("80c5")("./"+e.config.uiSettings.theme.theme+"/print/xyz.png"),alt:""}}),i("div",{staticClass:"content"},[i("span",[e._v("X: "+e._s(e.useGcodeCoords?e.gcodePosition[0].toFixed(2):e.toolheadPosition[0].toFixed(2)))]),i("span",[e._v("Y: "+e._s(e.useGcodeCoords?e.gcodePosition[1].toFixed(2):e.toolheadPosition[1].toFixed(2)))]),i("span",[e._v("Z: "+e._s(e.useGcodeCoords?e.gcodePosition[2].toFixed(2):e.toolheadPosition[2].toFixed(2)))])])])]),i("div",{staticClass:"print-des-itme"},[i("div",{staticClass:"detail-item"},[i("img",{staticClass:"des-icon",attrs:{src:n("2d8e")("./"+e.config.uiSettings.theme.theme+"/print/print_speed.png"),alt:""}}),i("div",[e._v(e._s(e.speed)+"%")])]),i("div",{staticClass:"detail-item"},[i("img",{staticClass:"des-icon",attrs:{src:n("2452")("./"+e.config.uiSettings.theme.theme+"/print/exture_speed.png"),alt:""}}),i("div",[e._v(e._s(e.flow)+"%")])]),i("div",{staticClass:"detail-item"},[i("img",{staticClass:"des-icon",attrs:{src:n("9c49")("./"+e.config.uiSettings.theme.theme+"/print/fan_speed.png"),alt:""}}),i("div",[e._v(e._s(e.fanSpeed?e.fanSpeed:0)+"%")])])]),i("div",{staticClass:"print-des-itme"},[i("div",{staticClass:"detail-item"},[i("img",{staticClass:"des-icon",attrs:{src:n("dc5c")("./"+e.config.uiSettings.theme.theme+"/print/print_time.png"),alt:""}}),i("div",{staticClass:"content"},[i("span",[e._v(e._s(e.$t("File.hadePrint")))]),i("span",[e._v(e._s(e.$filters.formatCounterTime(e.estimates.duration>0?e.estimates.duration:0)))])])])]),e.layers>0?i("div",{staticClass:"print-des-itme"},[i("div",{staticClass:"detail-item"},[i("img",{staticClass:"des-icon",attrs:{src:n("c15c0")("./"+e.config.uiSettings.theme.theme+"/print/rest_time.png"),alt:""}}),i("div",{staticClass:"content"},[i("span",[e._v(e._s(e.$t("File.restPrint")))]),i("span",[e._v(e._s(e.$filters.formatCounterTime(e.estimates.slicer>0?e.estimates.slicer:0)))])])])]):e._e(),e.layers>0?i("div",{staticClass:"print-des-itme"},[i("div",{staticClass:"detail-item"},[i("img",{staticClass:"des-icon",attrs:{src:n("8396")("./"+e.config.uiSettings.theme.theme+"/print/layer.png"),alt:""}}),i("div",{staticClass:"content"},[i("span",[e._v(e._s(e.$t("File.layerCount")))]),i("span",[e._v(e._s(e.layer>e.layers?e.layers:e.layer)+" / "+e._s(e.layers))])])])]):e._e()])])},g=[],m=(n("2ca0"),n("a9e3"),n("9265")),v=n("6c90"),b=n("6e0d"),y=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.preRate=0,e}return Object(c["a"])(n,[{key:"filename",get:function(){return this.$store.state.printer.printer.print_stats.filename||""}},{key:"fileNameShow",get:function(){var e=this.filename;return e.startsWith("U_")&&(e=e.substr(2)),e}},{key:"estimates",get:function(){return this.$store.getters["printer/getTimeEstimates"]}},{key:"currentRate",get:function(){return Number(this.estimates.progress)}},{key:"gradientColor",get:function(){var e={theme1:{"0%":"#00FCFF","100%":"#4CFFA9"},theme2:{"0%":"#00FCFF","100%":"#4CFFA9"},theme3:{"0%":"#00FCFF","100%":"#4CFFA9"},theme4:{"0%":"#00FCFF","100%":"#4CFFA9"}},t=this.$store.state.config.uiSettings.theme.theme;return e[t]}},{key:"isPrintComplete",get:function(){return this.$store.getters["printer/getIsPrintComplete"]}},{key:"onPrintComplete",value:function(e){e&&(this.$setLog("current print complete"),this.$router.replace("/Home"))}},{key:"layers",get:function(){var e=this.$store.state.printer.printer.current_file;if("first_layer_height"in e&&"layer_height"in e&&"object_height"in e){var t=Math.ceil((e.object_height-e.first_layer_height)/e.layer_height+1);if(t>0)return t}return 0}},{key:"layer",get:function(){var e=this.$store.state.printer.printer.current_file,t=this.$store.state.printer.printer.print_stats.print_duration||0,n=this.$store.state.printer.printer.gcode_move.gcode_position;if(e&&t>0&&"first_layer_height"in e&&"layer_height"in e&&n&&n.length>=3){var i=this.$store.state.printer.printer.gcode_move.gcode_position[2],r=Math.ceil((i-e.first_layer_height)/e.layer_height+1);if(r>0)return r}return 0}},{key:"currentStatusText",get:function(){var e={printing:this.$t("File.printing"),busy:this.$t("File.busying"),paused:this.$t("File.pausing"),cancelled:this.$t("File.cancelled"),idle:this.$t("File.idle"),ready:this.$t("File.ready")};return e[this.printerState]?e[this.printerState]:""}},{key:"useGcodeCoords",get:function(){return this.$store.state.config.uiSettings.general.useGcodeCoords}},{key:"gcodePosition",get:function(){return this.$store.state.printer.printer.gcode_move.gcode_position}},{key:"toolheadPosition",get:function(){return this.$store.state.printer.printer.toolhead.position}},{key:"speed",get:function(){return Math.round(100*this.$store.state.printer.printer.gcode_move.speed_factor)||100}},{key:"flow",get:function(){return Math.round(100*this.$store.state.printer.printer.gcode_move.extrude_factor)||100}},{key:"fan",get:function(){return this.$store.getters["printer/getAllFans"][0]}},{key:"fanSpeed",get:function(){return this.fan.speed?Math.round(100*this.fan.speed):void 0}}]),n}(Object(h["c"])(m["a"],v["a"],b["a"]));Object(d["a"])([Object(h["h"])("isPrintComplete",{immediate:!0})],y.prototype,"onPrintComplete",null),y=Object(d["a"])([Object(h["a"])({computed:Object(a["a"])({},Object(p["b"])(["config"]))})],y);var C=y,k=C,_=(n("ac1c"),n("2877")),O=Object(_["a"])(k,f,g,!1,null,"b3682580",null),w=O.exports,x=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"print-control-page"},[i("div",{staticClass:"pause-restore control-item",on:{touchend:function(t){return t.preventDefault(),e.openSelectMask.apply(null,arguments)}}},[i("div",{staticClass:"inner-control-item"},[i("div",{staticClass:"pause-cancel"},[e.printerPrinting&&!e.printerPaused?i("img",{attrs:{src:n("ef4b")("./"+e.config.uiSettings.theme.theme+"/file/pause.png"),alt:""}}):i("img",{attrs:{src:n("d356")("./"+e.config.uiSettings.theme.theme+"/file/resume.png"),alt:""}})]),i("div",{staticClass:"text"},[e._v(e._s(e.printerPaused?e.$t("File.restore")+" "+e.$t("File.cancel"):e.$t("File.pause")+" "+e.$t("File.cancel")))])])]),i("div",{staticClass:"adjust-print control-item",on:{touchend:function(t){return t.preventDefault(),e.handleJumpThrottle("/PrintAdjust")}}},[i("div",{staticClass:"inner-control-item"},[i("img",{attrs:{src:n("2297")("./"+e.config.uiSettings.theme.theme+"/file/adjust.png"),alt:""}}),i("div",{staticClass:"text"},[e._v(e._s(e.$t("File.adjust")))])])]),i("div",{staticClass:"set-print control-item",on:{touchend:function(t){return t.preventDefault(),e.handleJumpThrottle("/Configure")}}},[i("div",{staticClass:"inner-control-item"},[i("img",{attrs:{src:n("d80b")("./"+e.config.uiSettings.theme.theme+"/file/setting.png"),alt:""}}),i("div",{staticClass:"text"},[e._v(e._s(e.$t("File.configure")))])])]),i("van-dialog",{attrs:{"cancel-button-text":e.$t("Common.cancel"),"confirm-button-text":e.$t("Common.confirm"),message:e.isCancelPring?e.$t("File.areCancelPrint"):e.$t("File.arePausePrint"),"show-cancel-button":""},on:{confirm:e.handleConfirm,cancel:e.handleCancel},model:{value:e.isDialogShow,callback:function(t){e.isDialogShow=t},expression:"isDialogShow"}}),e.isLoading?i("cx-loading",{attrs:{visible:e.isLoading,className:"need-loading-icon"},on:{"update:visible":function(t){e.isLoading=t}},scopedSlots:e._u([{key:"content",fn:function(){return[i("van-loading",{attrs:{size:"3rem"}}),e.currentLoadingTip?i("div",{staticClass:"tip-content"},[e._v(e._s(e.$t(e.currentLoadingTip))+"...")]):e._e()]},proxy:!0}],null,!1,2554821458)}):e._e(),e.isSelectMaskShow?i("div",{staticClass:"operate-select-mask"},[i("div",{staticClass:"operate-title"},[e._v(e._s(e.$t("Common.pleaseSelectOpe")))]),i("div",{staticClass:"operate-btn",on:{click:e.toPauseRestore}},[e._v(e._s(e.printerPrinting&&!e.printerPaused?e.$t("File.pausePrint"):e.$t("File.restorePrint")))]),i("div",{staticClass:"operate-btn",on:{click:e.toCancel}},[e._v(e._s(e.$t("File.cancelPrint")))]),i("div",{staticClass:"operate-btn active-btn",on:{click:e.closeSelectMask}},[e._v(e._s(e.$t("CommonNav.back")))])]):e._e()],1)},j=[],$=n("c56f"),P=n("48b8"),F=n("f9f3"),T=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.isCancelPring=!1,e.isDialogShow=!1,e.isLoading=!1,e.currentLoadingTip="",e.isSelectMaskShow=!1,e.handleJumpThrottle=null,e}return Object(c["a"])(n,[{key:"pauseIsWait",get:function(){return this.hasWait(this.$waits.onPrintPause)}},{key:"onPauseChange",value:function(e){e||(this.isLoading=!1)}},{key:"resumeIsWait",get:function(){return this.hasWait(this.$waits.onPrintResume)}},{key:"onResumeChange",value:function(e){e||(this.isLoading=!1)}},{key:"cancelIsWait",get:function(){return this.hasWait(this.$waits.onPrintCancel)}},{key:"onCancelChange",value:function(e){e||(this.isLoading=!1)}},{key:"useGcodeCoords",get:function(){return this.$store.state.config.uiSettings.general.useGcodeCoords}},{key:"gcodePosition",get:function(){return this.$store.state.printer.printer.gcode_move.gcode_position}},{key:"toolheadPosition",get:function(){return this.$store.state.printer.printer.toolhead.position}},{key:"onPrinterState",value:function(e,t){"printing"!==e.toLowerCase()&&"paused"!==e.toLowerCase()&&"cancelled"!==t&&this.$router.replace("/Home")}},{key:"created",value:function(){this.handleJumpThrottle=Object(P["i"])(this.handleJump,200)}},{key:"handleConfirm",value:function(){this.$audioPlay(),this.isCancelPring?(this.currentLoadingTip="File.isCanceling",$["a"].printerPrintCancel(),this.addConsoleEntry("CANCEL_PRINT"),this.isLoading=!0):(this.currentLoadingTip="File.isPausing",$["a"].printerPrintPause(),this.addConsoleEntry("PAUSE"),this.isLoading=!0)}},{key:"handleCancel",value:function(){this.$audioPlay(),this.isDialogShow=!1}},{key:"toPauseRestore",value:function(){this.$audioPlay(),this.isSelectMaskShow=!1,this.cancelIsWait||this.pauseIsWait||this.resumeIsWait||(this.printerPrinting&&!this.printerPaused?(this.isCancelPring=!1,this.handleConfirm()):(this.currentLoadingTip="File.isResuming",$["a"].printerPrintResume(),this.addConsoleEntry("RESUME"),this.isLoading=!0))}},{key:"openSelectMask",value:function(){this.$audioPlay(),this.isSelectMaskShow=!0}},{key:"closeSelectMask",value:function(){this.$audioPlay(),this.isSelectMaskShow=!1}},{key:"toCancel",value:function(){this.$audioPlay(),this.isSelectMaskShow=!1,this.cancelIsWait||this.pauseIsWait||this.resumeIsWait||(this.isCancelPring=!0,this.handleConfirm())}},{key:"handleJump",value:function(e){this.$audioPlay(),this.$router.push(e)}}]),n}(Object(h["c"])(m["a"],v["a"],F["a"]));Object(d["a"])([Object(h["h"])("pauseIsWait")],T.prototype,"onPauseChange",null),Object(d["a"])([Object(h["h"])("resumeIsWait")],T.prototype,"onResumeChange",null),Object(d["a"])([Object(h["h"])("cancelIsWait")],T.prototype,"onCancelChange",null),Object(d["a"])([Object(h["h"])("printerState")],T.prototype,"onPrinterState",null),T=Object(d["a"])([Object(h["a"])({computed:Object(a["a"])({},Object(p["b"])(["config"]))})],T);var S=T,L=S,z=(n("497c"),Object(_["a"])(L,x,j,!1,null,"b76c9c2e",null)),U=z.exports,E=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"img-water-inject",class:{defalutImgWrap:!e.hadFileImg}},[e.isLoadingShow?i("div",{staticClass:"img-loading"},[i("van-loading",{attrs:{size:"3rem"}})],1):e._e(),e.hadFileImg?i("div",{attrs:{id:"img-canvas"}}):e._e(),e.hadFileImg?e._e():i("img",{staticClass:"defalut-img",attrs:{src:n("7845")("./"+e.$store.state.config.uiSettings.theme.theme+"/file/print_default.png"),alt:""}}),i("img",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{src:e.dataBaseUrl,id:"img-2d",alt:""}})])},D=[],I=(n("b680"),n("1276"),n("159b"),n("25f0"),"/mnt/UDISK/.crealityprint/upload/"),R=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.dataBaseUrl="",e.context=null,e.imgIsLoaded=!1,e.isLoadingShow=!0,e.currentPos=0,e.workerPos=null,e.workerColor=null,e.zList=[],e.isColorSetting=!1,e.publicPath="",e.hadFileImg=!0,e.imgHeight=600,e.imgWidth=600,e.canvasWidth=284,e.canvasHeight=284,e.dalayLoadTiemr=null,e.isOurCompanyGcode=!1,e}return Object(c["a"])(n,[{key:"pixelPosition",get:function(){return this.$store.state.common.pixelPosition}},{key:"estimates",get:function(){return this.$store.getters["printer/getTimeEstimates"]}},{key:"currentRate",get:function(){return Number((this.estimates.progress/100).toFixed(2))}},{key:"handleChangeRate",value:function(e){this.layers>0||e&&this.hadFileImg&&(e=e.toFixed(2),this.zList.push(e),this.imgIsLoaded&&this.hadFileImg&&this.setColor())}},{key:"layers",get:function(){var e=this.$store.state.printer.printer.current_file;if("first_layer_height"in e&&"layer_height"in e&&"object_height"in e){var t=Math.ceil((e.object_height-e.first_layer_height)/e.layer_height+1);if(t>0)return t}return 0}},{key:"layer",get:function(){var e=this.$store.state.printer.printer.current_file,t=this.$store.state.printer.printer.print_stats.print_duration||0,n=this.$store.state.printer.printer.gcode_move.gcode_position;if(e&&t>0&&"first_layer_height"in e&&"layer_height"in e&&n&&n.length>=3){var i=this.$store.state.printer.printer.gcode_move.gcode_position[2],r=Math.ceil((i-e.first_layer_height)/e.layer_height+1);if(r>0)return r}return 0}},{key:"layerProgress",get:function(){return this.layers>0?(this.layer/this.layers).toFixed(2):0}},{key:"onLayerProgressChange",value:function(e){this.layers&&e&&this.hadFileImg&&(this.zList.push(e),this.imgIsLoaded&&this.hadFileImg&&this.setColor())}},{key:"mounted",value:function(){var e=this;this.dalayLoadTiemr=setTimeout(Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getdataBaseUrl();case 2:clearTimeout(e.dalayLoadTiemr);case 3:case"end":return t.stop()}}),t)}))),1e3)}},{key:"initColorWorker",value:function(){var e=this;this.workerColor=new window.Worker("".concat(this.publicPath,"picParseWorker.js")),this.workerColor.onmessage=function(t){var n=t.data,i=n.currentPos,r=n.imgData;e.currentPos=i,e.zList.shift(),e.isColorSetting=!1,e.isLoadingShow&&(e.isLoadingShow=!1),e.workerColor&&e.workerColor.terminate(),e.workerColor=null,e.context.clearRect(0,0,e.canvasWidth,e.canvasHeight),e.context.beginPath(),e.context.putImageData(r,0,0),e.zList.length&&e.setColor()}}},{key:"beforeDestroy",value:function(){clearTimeout(this.dalayLoadTiemr),this.workerPos&&this.workerPos.terminate(),this.workerColor&&this.workerColor.terminate()}},{key:"getdataBaseUrl",value:function(){var e=this,t=this.imgUrl;this.$qtModule.connect({method:"getGcodeImage",path:I+t}).then((function(t){var n=t.data,i=void 0===n?[]:n;if(i.length&&i[1]){var r=t.data[1].data,a=t.data[1].info,s=a.split(" ");s.forEach((function(t){t.indexOf("*")>-1?(e.imgWidth=t.split("*")[0],e.imgHeight=t.split("*")[1]):t.indexOf("x")>-1&&(e.imgWidth=t.split("x")[0],e.imgHeight=t.split("x")[1])})),e.dataBaseUrl="data:image/png;base64,"+r,-1!==a.indexOf("png begin")&&(e.isOurCompanyGcode=!0),e.imgHandle()}else e.imgIsLoaded=!0,e.hadFileImg=!1,e.isLoadingShow=!1})).catch((function(){e.imgIsLoaded=!0,e.hadFileImg=!1,e.isLoadingShow=!1}))}},{key:"imgHandle",value:function(){var e=this,t=document.getElementById("img-2d");t.crossOrigin="anonymous";var n=document.createElement("canvas");this.context=n.getContext("2d");var i=document.getElementById("img-canvas"),r=i.offsetWidth,a=r,s=(a*this.imgHeight/this.imgWidth).toString();this.canvasWidth=a,this.canvasHeight=s,n.setAttribute("width",a),n.setAttribute("height",s),t.onload=function(){if(e.context.drawImage(t,0,0,a,s),i.appendChild(n),!e.isOurCompanyGcode)return e.imgIsLoaded=!0,e.hadFileImg=!0,void(e.isLoadingShow=!1);e.pixelPosition.length?(e.imgIsLoaded=!0,e.setColor()):(e.workerPos=new window.Worker("".concat(e.publicPath,"picParseWorker.js")),e.workerPos.onmessage=function(t){e.$store.commit("common/setPixelPosition",t.data.pixelPosition),e.imgIsLoaded=!0,e.setColor(),e.workerPos&&e.workerPos.terminate()},e.workerPos.postMessage({type:"getPos",data:{data:e.context.getImageData(0,0,a,s).data,width:e.canvasWidth}}))}}},{key:"setColor",value:function(){if(this.isOurCompanyGcode&&(this.currentRate||(this.isLoadingShow=!1),!this.isColorSetting&&this.zList.length&&this.imgIsLoaded)){this.isColorSetting=!0,this.initColorWorker();var e=this.pixelPosition;this.workerColor.postMessage({type:"setColor",data:{value:this.zList[0],imgData:this.context.getImageData(0,0,this.canvasWidth,this.canvasHeight),pixelPosition:e,currentPos:this.currentPos}})}}}]),n}(Object(h["c"])(h["g"]));Object(d["a"])([Object(h["d"])({type:String,required:!0})],R.prototype,"imgUrl",void 0),Object(d["a"])([Object(h["h"])("currentRate",{immediate:!0})],R.prototype,"handleChangeRate",null),Object(d["a"])([Object(h["h"])("layerProgress",{immediate:!0})],R.prototype,"onLayerProgressChange",null),R=Object(d["a"])([Object(h["a"])({})],R);var M=R,B=M,N=(n("8f2d"),Object(_["a"])(B,E,D,!1,null,"ac8d81ce",null)),W=N.exports,H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"print-error-message-dialog"},[n("div",{staticClass:"print-error-inner-content"},[n("div",{staticClass:"print-error-title"},[e._v(e._s(e.$t("BootGuide.customConfigSecondStepTips")))]),n("div",{staticClass:"print-error-content"},[e._v(e._s(e.$t("newAdd.printErrorTip")))]),n("div",{staticClass:"print-error-btn-wrap"},[n("div",{staticClass:"export-btn",on:{click:e.goHome}},[e._v(e._s(e.$t("Common.confirm")))])])])])},A=[],G=n("2b0e"),J=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return Object(c["a"])(n,[{key:"goHome",value:function(){this.$audioPlay(),this.$store.commit("common/setErrorMessageList",[]),this.$router.replace("/Home")}}]),n}(G["a"]);J=Object(d["a"])([Object(h["a"])({computed:Object(a["a"])({},Object(p["b"])(["config"]))})],J);var q=J,Y=q,K=(n("e009"),Object(_["a"])(Y,H,A,!1,null,null,null)),X=K.exports,Z=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.fromUrl="",e}return Object(c["a"])(n,[{key:"filename",get:function(){return this.$store.state.printer.printer.print_stats.filename||""}},{key:"errorMessageList",get:function(){return this.$store.getters["common/getErrorMessageList"]}},{key:"isRatesScreen",get:function(){return this.$store.getters["common/getIsRatesScreen"]}},{key:"cancelIsWait",get:function(){return this.hasWait(this.$waits.onPrintCancel)}},{key:"mounted",value:function(){var e=this.printerState.toLowerCase(),t=["printing","paused"],n=["/PrintAdjust","/Configure","/MacroControl"],i=["/Details","/File","/FileSearch"];-1===t.indexOf(e)&&-1!==n.indexOf(this.fromUrl)?this.$router.replace("/Home"):i.indexOf(this.fromUrl)}},{key:"getCamerConfig",value:function(){return this.$httpClient({method:"get",url:"".concat(this.$backBaseUrl,"/time_lapse/time_lapse/?method=get_config_params")})}},{key:"getCamerStatus",value:function(){return this.$httpClient({method:"get",url:"".concat(this.$backBaseUrl,"/settings/cam/?method=get_cam_url")})}},{key:"handleTimeLapse",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n,i,r,a,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.getCamerStatus(),this.getCamerConfig()]);case 2:r=e.sent,a=(null===(t=r[0])||void 0===t?void 0:t.data)||{},s=(null===(n=r[1])||void 0===n?void 0:n.data)||{},"0000"===a.code&&a.data&&a.data[0]&&"connected"===(null===(i=a.data[0])||void 0===i?void 0:i.status)&&"0000"===s.code&&s.data&&s.data["1"]&&(o=s.data["1"].frequency,this.sendGcode("HYPERLAPSE ACTION=START CYCLE=".concat(o)));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(Object(h["c"])(m["a"],v["a"]));Z=Object(d["a"])([Object(h["a"])({components:{PrintDes:w,PrintControl:U,ImgWaterInject:W,PrintErrorTip:X},computed:Object(a["a"])({},Object(p["b"])(["config"])),beforeRouteEnter:function(e,t,n){n((function(e){e.fromUrl=t.path}))}})],Z);var Q=Z,V=Q,ee=(n("1990"),Object(_["a"])(V,i,r,!1,null,"3e5981e2",null));t["default"]=ee.exports},7845:function(e,t,n){var i={"./theme1/file/print_default.png":"4f13"};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=a,e.exports=r,r.id="7845"},"80c5":function(e,t,n){var i={"./theme1/print/xyz.png":"0e53"};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=a,e.exports=r,r.id="80c5"},8396:function(e,t,n){var i={"./theme1/print/layer.png":"f6ff"};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=a,e.exports=r,r.id="8396"},"8f2d":function(e,t,n){"use strict";n("611e")},9544:function(e,t,n){var i={"./theme1/home/heat_bed.png":"3275"};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=a,e.exports=r,r.id="9544"},"9c49":function(e,t,n){var i={"./theme1/print/fan_speed.png":"e2a3"};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=a,e.exports=r,r.id="9c49"},aaa3:function(e,t,n){},ac1c:function(e,t,n){"use strict";n("f0d0")},c15c0:function(e,t,n){var i={"./theme1/print/rest_time.png":"5c19"};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=a,e.exports=r,r.id="c15c0"},d356:function(e,t,n){var i={"./theme1/file/resume.png":"8e0f"};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=a,e.exports=r,r.id="d356"},d80b:function(e,t,n){var i={"./theme1/file/setting.png":"fbf6"};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=a,e.exports=r,r.id="d80b"},dc5c:function(e,t,n){var i={"./theme1/print/print_time.png":"f20f"};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=a,e.exports=r,r.id="dc5c"},e009:function(e,t,n){"use strict";n("5212")},ef4b:function(e,t,n){var i={"./theme1/file/pause.png":"269f"};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=a,e.exports=r,r.id="ef4b"},f0d0:function(e,t,n){},f9f3:function(e,t,n){"use strict";var i=n("d4ec"),r=n("bee2"),a=n("262e"),s=n("2caf"),o=n("9ab4"),c=n("2b0e"),u=n("1b40"),l=function(e){Object(a["a"])(n,e);var t=Object(s["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(r["a"])(n,[{key:"activeExtruder",get:function(){return this.$store.getters["printer/getActiveExtruder"]}},{key:"extruderReady",get:function(){var e=this.$store.getters["printer/getActiveExtruder"];return!!(e&&e.temperature>=0&&e.min_extrude_temp>=0)&&e.temperature>=e.min_extrude_temp}},{key:"allHomed",get:function(){return this.$store.getters["printer/getHomedAxes"]("xyz")}},{key:"xyHomed",get:function(){return this.$store.getters["printer/getHomedAxes"]("xy")}},{key:"xHomed",get:function(){return this.$store.getters["printer/getHomedAxes"]("x")}},{key:"yHomed",get:function(){return this.$store.getters["printer/getHomedAxes"]("y")}},{key:"zHomed",get:function(){return this.$store.getters["printer/getHomedAxes"]("z")}}]),n}(c["a"]);l=Object(o["a"])([u["a"]],l),t["a"]=l}}]);