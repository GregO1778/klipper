(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06a44ac9"],{"02e4":function(t,e,i){var a={"./theme1/file/detail_default.png":"f752"};function s(t){var e=l(t);return i(e)}function l(t){if(!i.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}s.keys=function(){return Object.keys(a)},s.resolve=l,t.exports=s,s.id="02e4"},"09c0":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAANCAYAAABCZ/VdAAABzklEQVQ4T6WSv2sUURSFvzezaqIEd15CDIgpgmDjr04QRbbJZqYSxC0EidgodlopNlZCrNKJgo1g40ZDSMKsGFltlFRp8h9YaWR2o1uYONkrd2ZWEpPdRHPbd+93zj3vGif8dq9pnBJNc53AW2C3NfflEL/2TCAsGsKoDhwEBDEFAu/Df/PfRoPEVIEhZRgqtQIiM8B+DHVoXmakb+6fBSrLFllT8EkgxshDk0DC6BygArqBahbwvfc7Fpj+3kcufpeB1fIYI/ZuCteajU7gMA90A6sYuUrRljFGOoq8/NxNz4FPwKkkWsMjBaexrK8w0pXeAAPJasI1AvuiLTyNYho4my4s4xTtnZahjfAkoqVj4H4EbDIgZpTAe75J4IE4nKlpdOeztyf49ub6vs1wfZ2pD+E2dfAIsIJwm8A+/jM4tdTDXncCGM7+6Bk/8rcomdXt4dpRWT6KrGlEyVmB3MDvfUpVcqzUyggXM3AZ3yttFd3Wzludk7U8XbIIHE4+C+4DF4BiFtkrGvkrfztujXeGJ1f0dQA3FyKc3uhOXuP3Xup0SdvDdVrv2I2rGI6nV0HIvrhEob/RDi6CszO4EjTrn1EFTAPfZnm3963w361DjRNwagQmAAAAAElFTkSuQmCC"},"18c2":function(t,e,i){var a={"./theme1/file/edit.png":"6e30"};function s(t){var e=l(t);return i(e)}function l(t){if(!i.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}s.keys=function(){return Object.keys(a)},s.resolve=l,t.exports=s,s.id="18c2"},2030:function(t,e,i){},"3fe2":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"file-detail-page"},[a("div",{staticClass:"detail-left"},[t.imgUrl?a("img",{class:{notImage:!t.hadFileImg},attrs:{src:t.imgUrl,"data-error":0,alt:""},on:{error:function(e){return t.handleError(e)}}}):a("van-loading",{attrs:{size:"3rem"}})],1),a("div",{staticClass:"detail-right"},[a("div",{staticClass:"content-wrap"},[a("div",{ref:"detailList",staticClass:"detail-content",class:{noMoreShow:!t.needShowMore}},[a("div",{staticClass:"detail-list"},[a("div",{staticClass:"file-name-wrap"},[a("div",{staticClass:"file-name"},[t._v(t._s(t.fileDetail.file_name))]),a("img",{directives:[{name:"show",rawName:"v-show",value:t.fileDetail.file_name,expression:"fileDetail.file_name"}],attrs:{src:i("18c2")("./"+t.config.uiSettings.theme.theme+"/file/edit.png"),alt:""},on:{click:t.handleEditFile}})]),a("div",{staticClass:"detail-group"},[a("div",{staticClass:"detail-item"},[t._v(t._s(t.$t("File.date"))+" : "),a("span",[t._v(t._s(t.fileDetail.file_create_date))])]),a("div",{staticClass:"detail-item"},[t._v(t._s(t.$t("File.size"))+" : "),a("span",[t._v(t._s(t.fileDetail.file_size))])]),a("div",{staticClass:"detail-item"},[t._v(t._s(t.$t("newAdd.printDuration"))+" : "),a("span",[t._v(t._s(t.fileDetail.file_print_time))])])]),a("div",{staticClass:"detail-group"},[a("div",{staticClass:"detail-item"},[t._v(t._s(t.$t("Details.printTemplate"))+" : "),a("span",[t._v(t._s(t.fileDetail.machine_name))])]),a("div",{staticClass:"detail-item"},[t._v(t._s(t.$t("Details.singleHeight"))+" : "),a("span",[t._v(t._s(t.fileDetail.layer_height))])]),a("div",{staticClass:"detail-item"},[t._v(t._s(t.$t("Details.modelThickness"))+" : "),a("span",[t._v(t._s(t.fileDetail.wall_thickness))])]),a("div",{staticClass:"detail-item"},[t._v(t._s(t.$t("Details.fillRate"))+" : "),a("span",[t._v(t._s(t.fileDetail.infill_sparse_density))])]),a("div",{staticClass:"detail-item"},[t._v(t._s(t.$t("Details.fillSpeed"))+" : "),a("span",[t._v(t._s(t.fileDetail.infill_speed))])]),a("div",{staticClass:"detail-item"},[t._v(t._s(t.$t("Details.timeToPrint"))+" : "),a("span",[t._v(t._s(t.fileDetail.file_print_time))])]),a("div",{staticClass:"detail-item"},[t._v(t._s(t.$t("Details.materialToPrint"))+" : "),a("span",[t._v(t._s(t.fileDetail.file_material_weight))])])]),a("div",{staticClass:"detail-group"},[a("div",{staticClass:"detail-item"},[t._v(t._s(t.$t("Details.priceToPrint"))+" : "),a("span",[t._v(t._s(t.fileDetail.estimated_print_price))])]),a("div",{staticClass:"detail-item"},[t._v(t._s(t.$t("Details.heatPlateTemper"))+" : "),a("span",[t._v(t._s(t.fileDetail.bed_temperature))])]),a("div",{staticClass:"detail-item"},[t._v(t._s(t.$t("Details.leftNozzleTemper"))+" : "),a("span",[t._v(t._s(t.fileDetail.left_print_temperature))])]),a("div",{staticClass:"detail-item"},[t._v(t._s(t.$t("Details.rightNozzleTemper"))+" : "),a("span",[t._v(t._s(t.fileDetail.right_print_temperature))])]),a("div",{staticClass:"detail-item"},[t._v(t._s(t.$t("Details.leftNozzleMater"))+" : "),a("span",[t._v(t._s(t.fileDetail.left_material_name))])]),a("div",{staticClass:"detail-item"},[t._v(t._s(t.$t("Details.rightNozzleMater"))+" : "),a("span",[t._v(t._s(t.fileDetail.right_material_name))])])]),a("div",{staticClass:"detail-group"},[a("div",{staticClass:"detail-item"},[t._v(t._s(t.$t("Details.supportStructure"))+" : "),a("span",[t._v(t._s(t.fileDetail.support_pattern))])]),a("div",{staticClass:"detail-item"},[t._v(t._s(t.$t("Details.basePlateAdd"))+" : "),a("span",[t._v(t._s(t.fileDetail.base_plate_attachment))])]),a("div",{staticClass:"detail-item"},[t._v(t._s(t.$t("Details.fillShape"))+" : "),a("span",[t._v(t._s(t.fileDetail.infill_pattern))])]),a("div",{staticClass:"detail-item"},[t._v(t._s(t.$t("Details.solidFillShape"))+" : "),a("span",[t._v(t._s(t.fileDetail.solid_fill_pattern))])]),a("div",{staticClass:"detail-item"},[t._v(t._s(t.$t("Details.leftExLineWidth"))+" : "),a("span",[t._v(t._s(t.fileDetail.left_extrusion_line_weight))])]),a("div",{staticClass:"detail-item"},[t._v(t._s(t.$t("Details.rightExLineWidth"))+" : "),a("span",[t._v(t._s(t.fileDetail.right_extrusion_line_weight))])])])])]),t.needShowMore?a("div",{staticClass:"check-more",on:{click:t.handleMoreShow}},[t._v(" "+t._s(t.$t("Details.moreDetail"))+" "),a("img",{attrs:{src:i("fa20")("./"+t.config.uiSettings.theme.theme+"/file/bottom_arrow.png"),alt:""}})]):t._e()]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.fileDetail.file_name,expression:"fileDetail.file_name"}],staticClass:"print-icon",on:{click:t.goPrinting}},[t._v(t._s(t.$t("File.print")))])]),a("van-dialog",{staticClass:"edit-file-dialog",style:{top:t.isEditFocus?"32%":"45%"},attrs:{"before-close":t.onBeforeClose,"cancel-button-text":t.$t("Common.cancel"),"confirm-button-text":t.$t("Common.confirm"),title:t.$t("Details.fileName"),"show-cancel-button":""},model:{value:t.editNameShow,callback:function(e){t.editNameShow=e},expression:"editNameShow"}},[a("div",{staticClass:"dialog_model"},[a("div",{staticClass:"dialog_model-bottom"},[a("van-field",{ref:"editInput",attrs:{type:"text",maxlength:"30",clearable:""},on:{focus:t.handleFocus,blur:t.handleBlur},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}})],1)])]),t.isRequestLoading?a("cx-loading",{attrs:{visible:t.isRequestLoading,duration:3e4,closeCallBack:t.closeCallBack},on:{"update:visible":function(e){t.isRequestLoading=e}}},[t._v(" "+t._s(t.$t("Common.loading"))+" ")]):t._e()],1)},s=[],l=i("5530"),n=i("1da1"),r=i("d4ec"),o=i("bee2"),u=i("262e"),c=i("2caf"),d=(i("96cf"),i("ac1f"),i("5319"),i("00b4"),i("99af"),i("1276"),i("a15b"),i("a9e3"),i("9ab4")),f=i("1b40"),h=i("2f62"),p=i("c56f"),m=i("9265"),v=function(t){Object(u["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(r["a"])(this,a),t=e.apply(this,arguments),t.needShowMore=!0,t.editNameShow=!1,t.inputValue="",t.originInputValue="",t.fileDetail={},t.queryData={},t.isLocalFile=!0,t.copies=0,t.fileUpdateName="",t.isRequestLoading=!1,t.imgUrl="",t.hadFileImg=!0,t.isEditFocus=!1,t}return Object(o["a"])(a,[{key:"printRequestStatus",get:function(){return this.$store.getters["printer/getPrintRequestRes"]}},{key:"onChangeRequestStatus",value:function(t){var e=this;if("success"===t&&"/Details"===this.$route.path)var i=setTimeout((function(){clearTimeout(i),e.$router.push({path:"/Printing"}),e.isRequestLoading=!1}),2e3);else"error"===t&&"/Details"===this.$route.path&&(this.$toast.fail(this.$t("File.printAddFail")),this.isRequestLoading=!1);this.$nextTick((function(){e.$store.dispatch("printer/onRequestRes","")}))}},{key:"mounted",value:function(){var t,e,i=null===(t=this.$route.query)||void 0===t?void 0:t.isLocalFile;this.isLocalFile="true"===i;var a=null===(e=this.$route.query)||void 0===e?void 0:e.fileDetail,s=a||{};this.queryData=s,this.getdataBaseUrl(),this.fnPostDetail(!1)}},{key:"getdataBaseUrl",value:function(){var t=this;this.$qtModule.connect({method:"getGcodeImage",path:this.queryData["origin"]}).then((function(e){var a=e.data,s=void 0===a?[]:a;if(s.length&&s[1]){var l=e.data[1].data;t.imgUrl="data:image/png;base64,"+l}else t.hadFileImg=!1,t.imgUrl=i("02e4")("./"+t.$store.state.config.uiSettings.theme.theme+"/file/detail_default.png")})).catch((function(){t.hadFileImg=!1,t.imgUrl=i("02e4")("./"+t.$store.state.config.uiSettings.theme.theme+"/file/detail_default.png")}))}},{key:"handleMoreShow",value:function(){var t;(this.$audioPlay(),this.needShowMore=!1,this.detailList)&&(this.detailList.scrollTop=null===(t=this.detailList)||void 0===t?void 0:t.scrollHeight)}},{key:"detailList",get:function(){var t=this.$refs.detailList;if(t)return t}},{key:"goPrinting",value:function(){this.$audioPlay(),this.isRequestLoading=!0,this.isLocalFile?p["a"].printerPrintStart("/"+this.fileDetail.file_name):this.goDiskPrint()}},{key:"goDiskPrint",value:function(){var t=this,e={method:"cp_for_udisk_preprint",params:{origin:"U_"+this.fileDetail.origin}};this.$httpClient({method:"post",url:"".concat(this.$backBaseUrl,"/files/"),data:e}).then((function(e){var i=(null===e||void 0===e?void 0:e.data)||{};if("0000"===i.code){var a=t.fileDetail.file_name.lastIndexOf("."),s=t.fileDetail.file_name.substr(0,a)+".gcode";p["a"].printerPrintStart("/U_"+s)}else t.isRequestLoading=!1})).catch((function(){t.isRequestLoading=!1}))}},{key:"handleEditFile",value:function(){this.$audioPlay(),this.editNameShow=!0,this.originInputValue=this.inputValue}},{key:"onBeforeClose",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e,i){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("confirm"!==e){t.next=25;break}if(this.$audioPlay(),this.originInputValue!==this.inputValue){t.next=4;break}return t.abrupt("return",i());case 4:if(this.inputValue.replace(/\s*/g,"")){t.next=9;break}return this.inputValue=this.formatStr(this.fileDetail.file_name),this.originInputValue="",this.$toast(this.$t("Details.inputEmpty")),t.abrupt("return",i());case 9:if(a=/^[a-zA-Z0-9_\u4e00-\u9fa5]+$/,!a.test(this.inputValue)){t.next=21;break}if(!(this.inputValue.length>30)){t.next=16;break}return this.$toast.fail(this.$t("Details.characters")),t.abrupt("return",i(!1));case 16:return t.next=18,this.fnEditNameShow();case 18:return t.abrupt("return",i());case 19:t.next=23;break;case 21:return this.$toast.fail(this.$t("Details.namedetile")),t.abrupt("return",i(!1));case 23:t.next=29;break;case 25:return this.$audioPlay(),this.inputValue=this.formatStr(this.fileDetail.file_name),this.originInputValue="",t.abrupt("return",i());case 29:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}()},{key:"formatStr",value:function(t){if(t){var e=t.lastIndexOf("."),i=t.substr(0,e);return i}return""}},{key:"fnPostDetail",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var i,a,s,l,n,r,o,u,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={origin:this.queryData["origin"],fileName:this.queryData["fileName"]},e&&(a=this.queryData["origin"].lastIndexOf("/"),s=this.queryData["origin"].substring(0,a),i.origin="".concat(s,"/").concat(this.fileUpdateName),i.fileName=this.fileUpdateName,this.queryData["origin"]=i.origin,this.queryData["fileName"]=i.fileName),l={method:"get_file_detail",params:{file_path:i.origin,file_name:i.fileName}},t.next=5,this.$httpClient({method:"post",url:"".concat(this.$backBaseUrl,"/files/"),data:l});case 5:n=t.sent,r=(null===n||void 0===n?void 0:n.data)||{},"0000"===r.code?(this.copies=r.data.Copies,this.fileDetail=null===r||void 0===r?void 0:r.data,this.inputValue=this.formatStr(this.fileDetail.file_name),this.fileDetail.showName=this.formatStr(this.fileDetail.file_name),this.fileDetail.origin=i.origin,this.queryData["img"]&&(o=this.queryData["img"].split("/images/")[1],u=o.split("/"),u.length=u.length-1,c=u.join("/")?"/"+u.join("/"):"",this.queryData["origin"]=i.origin,this.queryData["img"]="http://".concat(f["g"].prototype.IP,":9005/images").concat(c,"/").concat(this.fileDetail.showName,".png"),this.getdataBaseUrl())):"1005"===r.code&&(this.$toast.fail(this.$t("File.filedoesnotexist")),this.$store.dispatch("common/onFileUpdate",!0),this.$router.go(-1));case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"fnEditNameShow",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,i,a,s,l,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.inputValue.replace(/\s*/g,"")+"."+this.queryData["fileType"],i=this.queryData["origin"],a=i.split("/"),a[a.length=a.length-1],s=a.join("/"),l={method:"rename_file",params:{file_path:i,dst_path:s,rename:e}},t.next=8,this.$httpClient({method:"post",url:"".concat(this.$backBaseUrl,"/files/"),data:l});case 8:n=t.sent,r=(null===n||void 0===n?void 0:n.data)||{},"0000"===r.code?(this.fileUpdateName=e,this.$store.dispatch("common/onFileUpdate",!0),this.fnPostDetail(!0),this.$toast.success(this.$t("Common.success"))):"1041"===r.code?this.$toast.fail(this.$t("Details.renameFail")):(this.$toast.fail(this.$t("Common.failure")),this.inputValue=this.formatStr(this.fileDetail.file_name));case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"closeCallBack",value:function(){this.$store.dispatch("printer/onRequestRes","")}},{key:"handleFocus",value:function(){this.$audioPlay(),this.isEditFocus=!0}},{key:"handleBlur",value:function(){var t=this,e=setTimeout((function(){t.isEditFocus=!1,clearTimeout(e)}),100)}},{key:"handleError",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.target.getAttribute("data-error")>0)){t.next=2;break}return t.abrupt("return");case 2:a=Number(e.target.getAttribute("data-error"))+1,e.target.setAttribute("data-error",a),e.target.src=i("02e4")("./"+this.$store.state.config.uiSettings.theme.theme+"/file/detail_default.png"),e.target.style.width="50%",e.target.onerror=null;case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),a}(Object(f["c"])(m["a"]));Object(d["a"])([Object(f["h"])("printRequestStatus")],v.prototype,"onChangeRequestStatus",null),v=Object(d["a"])([Object(f["a"])({computed:Object(l["a"])({},Object(h["b"])(["config"]))})],v);var g=v,_=g,D=(i("79c8"),i("2877")),b=Object(D["a"])(_,a,s,!1,null,"49d4b108",null);e["default"]=b.exports},"6e30":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAXCAYAAAAP6L+eAAABh0lEQVRIS9WUvy9DURSAv+N3mqBPdDH5H2o1MBUx+BHKZDIamC1GsdhMFjGQCk3xnoR/QIR/wWR7faIiKfWONCUtvfreayzues/57nfuufeIKi0i+ERZ524Pwiql4iaTAy+mVFFFRNDQ3NxDjLbOHMgocAcyzZh1/zNfQgPLgYfaQbeXASZr8lzET5Pqv6xlhQcfaivd3h6wYJB5R2SGlJX92gsHVhUcbwdYNlYo2PjWFONSjAY+97YQXQsLLccFGzveOqobv/TijII1zZy8Rmue7a2AbkeFNja2vSXQ3V+qylGwZk2mje/YcWdQOQBaDbaBULOx46ZQKT+bDgM0S8Gaa2RqNnbywygOEKuDCic8WfNhoN+NLx6T+P4V0FtvqscU+tJhoVWw7Q2CXgOJOqjKEc/xxSjQKtjJT6Cc/hU0ACwZEvFFhuQt0qD6DK78vIrxPnCLyi2iN3RZGUak1Ay0anyj7SQpIRJ+LgecGDwrmlQWbNc8CpsEVj+Inf+z8mtdhP8G/gDy3Y8OWt7TcwAAAABJRU5ErkJggg=="},"79c8":function(t,e,i){"use strict";i("2030")},f752:function(t,e,i){t.exports=i.p+"img/detail_default.e7713cfe.png"},fa20:function(t,e,i){var a={"./theme1/file/bottom_arrow.png":"09c0"};function s(t){var e=l(t);return i(e)}function l(t){if(!i.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}s.keys=function(){return Object.keys(a)},s.resolve=l,t.exports=s,s.id="fa20"}}]);